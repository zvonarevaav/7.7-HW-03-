Проект News Portal
Пришла пора применить новые знания для улучшения вашего сайта с новостями.

Фильтры и пагинация
Добавьте постраничный вывод на /news/, чтобы на одной странице было не больше 10 новостей и были видны номера лишь ближайших страниц, а также возможность перехода к первой или последней странице.

Добавьте страницу /news/search. На ней должна быть реализована возможность искать новости по определённым критериям. Критерии должны быть следующие:

по названию
по имени автора
позже указываемой даты
Убедитесь, что можно выполнить фильтрацию сразу по нескольким критериям.

Для вывода поля фильтрации по датам вам может понадобиться указать специальный тип в HTML.

Сложность в том, что форма за нас генерируется django-filter. Нам нужно сообщить ей о том, что мы хотим видеть на сайте календарь для выбора даты. Браузер сможет отобразить автоматически сам интерфейс календаря (от нас не требуется его верстать). Для решения задачи правильного вывода формы нам поможет более сложная настройка класса с описанием фильтров.

Вам необходимо изучить информацию по следующим ссылкам и постараться реализовать выбор даты:

Посмотрите, как указан фильтр name.
Возможно, вам дополнительно потребуется указание правильного типа формы в атрибуте widget. Пример.
Создание, редактирование и удаление объектов
Запрограммируйте страницы создания, редактирования и удаления новостей и статей. Предлагаем вам расположить страницы по следующим ссылкам:
/news/create/
/news/<int:pk>/edit/
/news/<int:pk>/delete/
/articles/create/
/articles/<int:pk>/edit/
/articles/<int:pk>/delete/
Если вы немного запутались, ввиду того, что модель у нас одна, а страницы под создание статей и новостей должны быть отдельно, то прочитайте подсказку.

При этом не бойтесь сначала поискать информацию в интернете и пробовать разные подходы к решению задачи!

В модели вашего домашнего проекта есть поле, которое может принимать два значения — «статья» или «новость». Это поле пользователь заполнять не должен. В зависимости от того, на какой из страниц отправляется POST-запрос на сохранение данных, такой тип и должен проставляться в рассматриваемое нами поле. Запрос со страницы /news/create/ должен создать запись в базе полем, заполненным значением «новость», а /articles/create/ — с полем «статья». При этом выбор значения поля не должен быть доступен пользователю на сайте. Для решения этой задачи мы сами можем установить нужное значение поля перед сохранением инстанса модели.

В этом нам помогут методы form_valid у CreateView и save у ModelForm.

По этой ссылке вы можете посмотреть пример работы с form_valid, который вызывается при POST-запросах.

Метод save имеет единственный аргумент commit, который позволит нам получить инстанс модели без сохранения в базу. Документация.

Скомбинировав их, мы можем получить следующее решение: переопределяем form_valid в нашем дженерике, получаем инстанс модели без сохранения в базе, устанавливаем нужное значение поля с типом поста, сохраняем данные (вызвав form_valid у родительского класса).

Разберём на примере другой задачи. Предположим, что мы хотим создавать товары, устанавливая их количество в 10, и при этом не давать пользователю менять это значение.

Из формы убираем поле, которое отвечает за количество товара — quantity.

В представлении, которое наследует CreateView, переопределяем метод form_valid и устанавливаем поле модели quantity равным 13. Далее super().form_valid(form) запустит стандартный механизм сохранения, который вызовет form.save(commit=True).

